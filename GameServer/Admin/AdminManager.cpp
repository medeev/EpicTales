

#include "Pch.h"
#include "AdminManager.h"

#include "IAdminCmd.h"

////////////////////////////////////////////////////////////////////////////////////////////////////
/// @ brief		소멸자
////////////////////////////////////////////////////////////////////////////////////////////////////
AdminManager::~AdminManager()
{
	_commands.clear();
}

////////////////////////////////////////////////////////////////////////////////////////////////////
/// @ brief		명령을 추가한다
////////////////////////////////////////////////////////////////////////////////////////////////////
void AdminManager::addCommand(const std::string& cmd, IAdminCommand* object)
{
	if (!_commands.insert({ cmd, object }).second)
		WARN_LOG("already exist command: %s", cmd.c_str());
}

////////////////////////////////////////////////////////////////////////////////////////////////////
/// @ brief		명령을 수행한다
////////////////////////////////////////////////////////////////////////////////////////////////////
std::string AdminManager::exec(std::string cmd, const std::map<std::string, int64_t>& cmdParams)
{
	auto iter = _commands.find(cmd);
	if (iter == _commands.end())
		return STRINGUTIL_FORMAT("%s not find command", cmd.c_str());

	return iter->second->exec(cmdParams);
}
