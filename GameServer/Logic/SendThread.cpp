

#include "Pch.h"
#include "SendThread.h"

////////////////////////////////////////////////////////////////////////////////////////////////////
/// @ brief		생성자
////////////////////////////////////////////////////////////////////////////////////////////////////
SendThread::SendThread()
	:
	Core::IThread("SendThread"),
	_taskManager("SendThread", *this, true)
{

}

////////////////////////////////////////////////////////////////////////////////////////////////////
/// @ brief  종료전 처리한다.
////////////////////////////////////////////////////////////////////////////////////////////////////
void SendThread::stop()
{
	// 작업태스크를 깨워 스레드가 진행되게 한다.
	_taskManager.pushEmptyTask();

	IThread::stop();
}

////////////////////////////////////////////////////////////////////////////////////////////////////
/// @ brief		실행한다
////////////////////////////////////////////////////////////////////////////////////////////////////
void SendThread::onRun()
{
	while (_running)
	{
		auto curTime = Core::Time::GetCurTimeMSec();
		_taskManager.update(curTime);
		Core::IThread::Sleep(1);
	}
}
